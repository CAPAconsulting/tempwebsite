<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollToPlugin.min.js"></script>
    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:5326149,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #F8F8F8;
            color: #111;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .hidden { display: none; }
        .btn {
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid gray;
            font-size: min(4vw, 4vh);
            cursor: pointer;
            text-decoration: none;
            color: #28282B;
            transition:  all .2s ease-in-out;
        }
        .btn:active {
            transform: scale(1.1);
            transition: .1s;
        }

        .raleway{
            font-family: "Raleway", sans-serif;
            font-optical-sizing: auto;
            font-weight: 750;
            font-style: normal;
        }

        .questions-grid {
            display:  grid;
            font-size: min(4vw, 4vh);
            grid-template-columns: min(90vw, 90vh);
            grid-template-rows: repeat(5, 30vh 6vh 6vh 6vh 6vh 6vh 6vh 6vh 28vh) 40vh 20vh 10vh 10vh 20vh;
            justify-content: left;
            justify-items: left;
            gap: 1vw;
        }

        .question {
            align-self: center;
            justify-self: stretch;

        }

        .answer {
            justify-self: left;
        }
        .buttonnext {
            justify-self: center;
            align-self: end;
        }
        .result {
            justify-self: center;
            align-self: center;
            font-size: min(6vw, 6vh);
            color: #50C878;
        }
        .contact {
            justify-self: center;
            align-self: center;
            font-size: min(4vw, 4vh);
            font-weight: 350;    
        }
        .throbberitem {
            justify-self: center;
            align-self: center;
        }
        .throbber {
            width: min(20vw, 20vh);
        }
        .followup-message {
            justify-self: center;
            align-self: center;
            font-size: min(4vw, 4vh);
            font-weight: 550;    
        }



    </style>
</head>

<body>

    <form id="relevance-questionnaire">

        <div id="question-container" class="questions-grid raleway">
            <div id="question1-question" class="question">
                <p>Question 1/5:</p>
                <p>Under what regulatory framework(s) and/or guideline(s) does your quality-system operate?</p>
            </div>
            <div id="question1-answer1" class="answer">
                <label><input type="checkbox" name="q1[1]" value="GMP"> GMP</label>
            </div>
            <div id="question1-answer2" class="answer">            
                <label><input type="checkbox" name="q1[2]" value="GDP"> GDP</label>
            </div>
            <div id="question1-answer3" class="answer">             
                <label><input type="checkbox" name="q1[3]" value="ISO13485"> ISO13485</label>
            </div>
            <div id="question1-answer4" class="answer"> 
                <label><input type="checkbox" name="q1[4]" value="ISO9001"> ISO9001</label>
            </div>
            <div id="question1-answer5" class="answer">             
                <label><input type="checkbox" name="q1[5]" value="ISO22000"> ISO22000</label>
            </div>
            <div id="question1-answer5" class="answer">            
                <label><input type="checkbox" name="q1[6]" value="Other(s) / I don't know"> Other(s) / I don't know</label>
            </div>
            <div id="question1-next" class="buttonnext">
                <button class="raleway" onclick="nextQuestion1(event)">Next</button>
            </div>                   
            <div id="filler0">          
            </div>


            <div id="question2-question" class="question">
                <p>Question 2/5:</p>
                <p>Do you have any issues with staying fully compliant to all requirements?</p>
            </div>
            <div id="question2-answer1" class="answer">
                <label><input type="checkbox" name="q2[1]" value="None"> None</label>
            </div>
            <div id="question2-answer2" class="answer">            
                <label><input type="checkbox" name="q2[2]" value="Next to none"> Next to none</label>
            </div>
            <div id="question2-answer3" class="answer">             
                <label><input type="checkbox" name="q2[3]" value="As does everybody, but it's under control"> As does everybody, but it's under control</label>
            </div>
            <div id="question2-answer4" class="answer"> 
                <label><input type="checkbox" name="q2[4]" value="Yes, I need help"> Yes, I need help</label>
            </div>
            <div id="filler1">             
                
            </div>
            <div id="filler2">            
                
            </div>
            <div id="question2-next" class="buttonnext">
                <button class="raleway" onclick="nextQuestion2(event)">Next</button>
            </div>   
            <div id="filler3">            



                
            </div>
            <div id="question3-question" class="question">
                <p>Question 3/5:</p>
                <p>What support do you have in mind?</p>
            </div>
            <div id="question3-answer1" class="answer">
                <label><input type="checkbox" name="q3[1]" value="General QA insights and support"> General QA insights and support</label>
            </div>
            <div id="question3-answer2" class="answer">            
                <label><input type="checkbox" name="q3[2]" value="QP (back-up) services"> QP (back-up) services</label>
            </div>
            <div id="question3-answer3" class="answer">             
                <label><input type="checkbox" name="q3[3]" value="RP (back-up) services"> RP (back-up) services</label>
            </div>
            <div id="question3-answer4" class="answer"> 
                <label><input type="checkbox" name="q3[4]" value="Specific support (training, PQR,..)"> Specific support (training, PQR,..)</label>
            </div>
            <div id="question3-answer5" class="answer"> 
                <label><input type="checkbox" name="q3[5]" value="QA optimization"> QA optimization</label>
            </div>
            <div id="question3-answer6" class="answer"> 
                <label><input type="checkbox" name="q3[6]" value="None for now"> None for now</label>
            </div>
            <div id="question3-next" class="buttonnext">
                <button class="raleway" onclick="nextQuestion3(event)">Next</button>
            </div> 
            <div id="filler4">            
            </div>


            <div id="question4-question" class="question">
                <p>Question 4/5:</p>
                <p>Approximately how many employees does your company have?</p>
            </div>
            <div id="question4-answer1" class="answer">
                <label><input type="checkbox" name="q4[1]" value="1 - 10"> 1 - 10</label>
            </div>
            <div id="question3-answer2" class="answer">            
                <label><input type="checkbox" name="q4[2]" value="10 - 100"> 10 - 100</label>
            </div>
            <div id="question3-answer3" class="answer">             
                <label><input type="checkbox" name="q4[3]" value="100 - 1000"> 100 - 1000</label>
            </div>
            <div id="question3-answer4" class="answer"> 
                <label><input type="checkbox" name="q4[4]" value="1000+"> 1000+</label>
            </div>
            <div id="filler5">            
            </div>
            <div id="filler6">            
            </div>
            <div id="question4-next" class="buttonnext">
                <button class="raleway" onclick="nextQuestion4(event)">Next</button>
            </div> 
            <div id="filler7">            
            </div>


            <div id="question5-question" class="question">
                <p>Question 5/5:</p>
                <p>Do you currently see quality as a cost, or as an investment?</p>
            </div>
            <div id="question5-answer1" class="answer">
                <label><input type="checkbox" name="q5[1]" value="a cost"> a cost</label>
            </div>
            <div id="question5-answer2" class="answer">            
                <label><input type="checkbox" name="q5[2]" value="an investment"> an investment</label>
            </div>
            <div id="filler8">
            </div>
            <div id="filler9">
            </div>
            <div id="filler10">            
            </div>
            <div id="filler11">            
            </div>

            <div id="question5-check" class="buttonnext">
                <button class="raleway" onclick="checkResults(event)">Check if we can can mean something to each other</button>
            </div> 

            <div id="filler12">            
            </div> 

            <div id="filler13">
            </div>

            <div id="final-message-large" class="result">

            </div>


            <div id="throbber" class="throbberitem">
                <img src="CAPAthrobber.png" id="logothrobber" class="throbber">
            </div>

            <div id="followup-message" class="contact">

            </div>

            </div>

        </div>

    </form>

    <script>
        function nextQuestion1() {
            event.preventDefault(); // Prevents form submission
            gsap.to(window, { duration: 1, scrollTo: {y: "#question2-question", offsetY: 40}, ease: "power3" });
        }
        function nextQuestion2() {
            event.preventDefault(); // Prevents form submission
            gsap.to(window, { duration: 1, scrollTo: {y: "#question3-question", offsetY: 40}, ease: "power3" });
        }
        function nextQuestion3() {
            event.preventDefault(); // Prevents form submission
            gsap.to(window, { duration: 1, scrollTo: {y: "#question4-question", offsetY: 40}, ease: "power3" });
        }
        function nextQuestion4() {
            event.preventDefault(); // Prevents form submission
            gsap.to(window, { duration: 1, scrollTo: {y: "#question5-question", offsetY: 40}, ease: "power3" });
        }

    </script>

<script>
    function seeResult() {
        let finalMessage = document.getElementById("final-message-large");
        finalMessage.classList.remove("hidden");
        finalMessage.innerHTML = `
            <p>Based on your answers, it seems like we can have a positive impact on eachother!</p>
        `;}

    function followup() {
        let followupmessage = document.getElementById("followup-message");
        followupmessage.classList.add("followup-message");       
        followupmessage.innerHTML = `
            <p>Let's get in touch through the contact details stated on the card where you found the QR code.</p>

            <p>Alternatively, here's a direct link to the contact-form!</p>
            <a href="/contact" class="btn">Contact-form</a>
        `;}


</script>


<script>
    function checkResults(event) {
        event.preventDefault();

        gsap.to(window, { duration: 1, scrollTo: "#final-message-large", ease: "power3" });

        var tl = gsap.timeline();
            tl.to("#logothrobber", {opacity: 0, duration: 0.4,  ease: "power2"});
            tl.to("#logothrobber", {opacity: 1, duration: 0.4,  ease: "power2"});    
            tl.to("#logothrobber", {y: -50, duration: 0.5,  ease: "power2.out"});
            tl.to("#logothrobber", {y: 0, duration: 0.5,  ease: "power2.in"});
            tl.to("#logothrobber", {y: -50, duration: 0.5,  ease: "power2.out"});
            tl.to("#logothrobber", {y: 0, duration: 0.5,  ease: "power2.in"});
            tl.to("#logothrobber", {y: -50, duration: 0.5,  ease: "power2.out"});
            tl.to("#logothrobber", {opacity: 0, duration: 0.7}, '<');
            tl.call(seeResult)
            tl.call(followup)            


        // Display the final message
        



        // Collect form data
        let form = document.getElementById("relevance-questionnaire");
        let formData = new FormData(form);
        let answers = {};
        
        formData.forEach((value, key) => {
            if (!answers[key]) {
                answers[key] = [];
            }
            answers[key].push(value);
        });
        
        let emailBody = "Survey Answers:\n\n";
        for (let question in answers) {
            emailBody += `${question}: ${answers[question].join(", ")}\n`;
        }
        
        // Send email using Web3Forms
        fetch("https://api.web3forms.com/submit", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                access_key: "90c152e5-272e-45d5-a299-6fc538211ec3",
                subject: "Survey Submission",
                from_name: "Questionnaire",
                from_email: "no-reply@capaconsulting.be",
                reply_to: "mmmmmelk@gmail.com",
                message: emailBody
            })
        }).then(response => response.json())
          .then(data => console.log("Email sent successfully", data))
          .catch(error => console.error("Error sending email:", error));
    }
</script>
   
</body>
</html>
